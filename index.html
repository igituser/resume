<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="./main.css">
	<link rel="stylesheet" href="./loading.css">
	<script src="//at.alicdn.com/t/font_1638479_omd2eu5wevr.js"></script>
	<script src="./js/tween.umd.js"></script>
	<style type="text/css">
        .icon {
           width: 1em; height: 1em;
           vertical-align: -0.15em;
           fill: currentColor;
		   overflow: hidden;
		}
		
		.site-welcome{
			display:none;
			justify-content: center;
			align-items: center;
			position:fixed;
			top:0;
			left:0;
			width:100%;
			height:100%;
			background-color: #888;
			z-index:1;
		}

		.site-welcome.active{
			display:flex;
		}
    </style>
	<title>我的网页</title>
</head>
<body>
	<div id="siteWelcome" class="site-welcome active">
		<div class="loading"></div>
	</div>
	<!-- 导航 -->
	<div id="topNavBar" class="topNavBar " >
		 <div class="topNavBar-inner clearfix">
			 <a class="logo" href=""><span class="rs">RS</span><span class="card">card</span></a>
			 <nav>
				 <ul class="clearfix">
					 <li>
						 <a href="#siteUserCard">关于</a>
					</li>
					 <li>
						 <a href="#siteSkills">技能</a>
					</li>
					 <li>
						 <a href="#sitePortfolio">作品</a>
						 <ul class="submenu">
							 <li>作品1</li>
							 <li>作品2</li>
							 <li>作品3</li>
						 </ul>
					</li>
					 <li>
						 <a href="#">博客</a>
						 <ul class="submenu">
							<li>博客1</li>
							<li>博客2</li>
							<li>博客3</li>
						</ul>
					</li>
					 <li>
						 <a href="#">日历</a>
					</li>
					 <li>
						 <a href="#">联系方式</a>
					</li>
					 <li>
						 <a href="#">其他</a>
					</li>
					 <!-- <li><a href="#">ALL DEMOS</a></li> -->
				 </ul>
			 </nav>
		 </div>
	</div>

	<!-- 通栏图 -->
	<div class="banner">
		<div class="mask"></div>
	</div>

	<!-- 简历卡（主要内容） -->
	<main>
		<div data-x id="siteUserCard" class="userCard offset">
			<div class="pictureAndText clearfix">
				<div class="picture">
					<img src="./img/avatar.jpg" alt="头像">
				</div>
				<div class="text">
					<span class="welcome">HELLO
						<span class="triangle"></span>
					</span>
					<!-- 卡片中最重要的就是名字所以用h1标签 -->
					<h1>方应航</h1>
					<!-- 副标题就用h2，如果是一段话就是p， -->
					<p>前端开发工程师</p>
					<hr/>
					<dl>
						<dt>年龄</dt>
						<dd>aa</dd>
						<dt>所在城市</dt>
						<dd>北京海淀区</dd>
						<dt>邮箱</dt>
						<dd>example@outlookcom</dd>
						<dt>手机</dt>
						<dd>aaaaaaaaaa</dd>
					</dl>
				</div>
			</div>
			<footer class="media">
				<a href="#">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-weibo"></use>
					</svg>
				</a>
				<a href="#">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-pingguo"></use>
					</svg>
				</a>
				<a href="#">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-anzhuo"></use>
					</svg>
				</a>
				<a href="#">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-zhihu"></use>
					</svg>
				</a>
				<a href="#">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-lvyou"></use>
					</svg>
				</a>
			</footer>
		</div>

		<!-- 简历下载 -->
		<p class="downloadResume-wrapper">
			<a class="downloadResume" href="./resume.pdf" target="_blank" download class="button">简历下载.pdf</a>
		</p>
		<p class="selfIntroduction">
			方应航，资深前端工程师，资深前端讲师。现在在饥人谷教授前端课程。技能：前端开发，Rails开发，Node.js 开发。方应航，资深前端工程师，资深前端讲师。现在在饥人谷教授前端课程。技能：前端开发，Rails开发，Node.js 开发。
		
		</p>
	</main>
	<!-- section代表章节的意义 -->
	<section data-x id='siteSkills' class="skills offset">
		<h2>专业技能</h2>
		<ol class="clearfix">
			<li>
				<h3>HTML5 &amp; CSS3 &amp; JAVASCRIPT</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>ECMAscript 6</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>jQuery</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>Vue</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>React</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>HTTP</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
		</ol>
	</section>

	<!-- 项目或者作品 -->
	<section data-x id="sitePortfolio" class="portfolio offset">
		<h2>作品集</h2>
		<nav>
			<ol class="clearfix">
				<li id="portfolio1">所有</li>
				<li id="portfolio2">框架</li>
				<li id="portfolio3">原生JS&amp;CSS</li>
			</ol>
			<div id="barToggle" class="bar state-1">
				<div class="bar-inner"></div>
			</div>
		</nav>

		<!-- works内部绝对定位脱离文档流后，失去对元素对控制，高度失效只能手动指定 -->
		<!-- 该板块元素是随着点击进行变化的，为了方便控制全部绝对定位 -->
		<div class="works" style="height:576px;">
			<!-- 绝对定位手动指定 top 和 left 不然有bug -->
			<div class="big" style="top:0; left:0;">
				<img src="./img/1.jpg" alt="作品1">
			</div>
			<div class="small" style="top:0; left:644px;">
				<img src="./img/2.jpg" alt="作品2">
			</div>
			<div class="small" style="top:298px; left:644px;"> 
				<img src="./img/3.jpg" alt="作品3">
			</div>
		</div>
	</section>

   </body>
</html>
<script>
	// loading
	window.onload = function(e){
		siteWelcome.classList.remove('active');

		let firstItem = document.querySelectorAll('[data-x]')[0]
		firstItem.classList.remove('offset')
	}

	portfolio1.onclick = function (){
		barToggle.className = "bar state-1";
	}

	portfolio2.onclick = function (){
		barToggle.className = "bar state-2";
	}

	portfolio3.onclick = function(){
		barToggle.className = "bar state-3";
	}


	// sticky nav
	window.onscroll = function(e){
		if(window.scrollY > 0){
			topNavBar.classList.add('sticky')
		}else{
			topNavBar.classList.remove('sticky')
		}

		let specialTags = document.querySelectorAll('[data-x]')
		let minIndex = 0
		for(let i = 1; i < specialTags.length; i++){
			if(Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndex].offsetTop - window.scrollY)){
				minIndex = i
			}

			specialTags[minIndex].classList.remove('offset')

			let id = specialTags[minIndex].id
			let a = document.querySelector('[href="#' + id + '"]')
			let li = a.parentNode
			let lis = li.parentNode.querySelectorAll('li')
			for(let i = 0; i < lis.length; i ++){
				lis[i].classList.remove('highlight')
			}
			li.classList.add('highlight')
		}
	}

	// submenu
	var lis = document.querySelectorAll('nav li');
	for(var i = 0; i < lis.length; i ++){
		lis[i].onmouseenter = function(e){
			e.currentTarget.classList.add('active');
		}

		lis[i].onmouseleave = function(e){
			e.currentTarget.classList.remove('active');
		}
	}

	//滚动到锚点
	var anchors = document.querySelectorAll('#topNavBar nav li a')
	for(var i = 0; i < anchors.length ; i++){
		anchors[i].onclick = function(e){
			e.preventDefault()
			//dom.id 和 dom.getAttribute('href')区别就是前者经过浏览器的处理加了http协议后的东西，后者则是用户写的原文
			var href = e.currentTarget.getAttribute('href');
			var ele = document.querySelector(href);

			// console.log(ele.getBoundingClientRect())
			var top = ele.offsetTop;
			// window.scrollTo(0, top - 80)

			let currentTop = window.scrollY //当前视口Y轴距离
			let targetTop = top - 80 
			let s = targetTop - currentTop //需要滚动的距离
			var t = Math.abs((s / 100) * 300) //滚动的距离和时间的关系，每100像素需要300毫秒的时间
			if( t > 500 ) { t = 500 }  // 限制滚动时间不能长于500ms

			function animate(time) {
				requestAnimationFrame(animate)
				TWEEN.update(time)
			}
			requestAnimationFrame(animate)
			const coords = {y : currentTop} //从哪儿开始
			const tween = new TWEEN.Tween(coords)
			.to({y: targetTop}, t)
			.easing(TWEEN.Easing.Quadratic.InOut) //缓动模式
			.onUpdate(()=>{
				// console.log(coords.y)
				window.scrollTo(0, coords.y)
			})
			.start();			
		}
	}

</script>
